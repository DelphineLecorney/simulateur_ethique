{% load custom_filters %}

<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Parcours</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  </head>
  <body class="bg-secondary text-white">
    <div class="container py-5">
      <h1 class="mb-4 text-center">üß≠ Parcours √©thiques disponibles</h1>
      <p class="lead text-center">
        Choisis un parcours pour explorer tes valeurs √† travers des dilemmes
        √©thiques.
      </p>

      <div class="d-flex justify-content-center gap-3 mt-4">
        <a href="{% url 'home' %}" class="btn btn-outline-light btn-lg">
          ‚Üê Retour √† l‚Äôaccueil
        </a>
      </div>

      {% for p in parcours_list %}

      <div class="parcours-card animate__animated animate__fadeInUp">
        <div class="card-top-bar"></div>

        <div class="card-body">
          <h5 class="card-title">üß≠ {{ p.title }}</h5>
          <p class="card-text">{{ p.description }}</p>

          {% if p.scenarios.all %}
          <h6 class="mt-3">üìö Sc√©narios inclus :</h6>
          <ul class="list-group mb-3">
            {% for s in p.scenarios.all %}
            <li class="list-group-item">
              <strong>{{ s.title }}</strong><br />
              {{ s.description|truncatewords:20 }}
            </li>
            {% endfor %}
          </ul>
          {% else %}
          <p class="text-muted">
            Ce parcours ne contient pas encore de sc√©narios.
          </p>
          {% endif %}

          <a href="{% url 'parcours_start' p.id %}" class="btn btn-primary">
            Commencer ce parcours
          </a>
        </div>
      </div>
      {% empty %}
      <p class="text-center">Aucun parcours disponible pour le moment.</p>
      {% endfor %}
    </div>

    <nav class="navbar fixed-bottom bg-primary text-white">
      <div class="container text-center">
        <span class="navbar-text w-100">¬© 2025 Simulateur √âthique</span>
      </div>
    </nav>
  </body>
</html>
